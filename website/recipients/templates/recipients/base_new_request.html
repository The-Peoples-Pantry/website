{% extends 'base.html' %}
{% load bootstrap4 %}

{% block content %}
<div class="row">
  <div class="col-lg-8 mr-auto ml-auto">

    {# Define request_title block to set the heading of the page #}
    <h1>{% block request_title %}{% endblock request_title %}</h1>

    {% block introduction %}
    <p>
      The COVID-19 crisis has left many in our community struggling to access food as we are
      faced with mass unemployment and loss of income, excessive hoarding at grocery stores,
      reduced transportation options, and more. Particularly hard-hit communities include, but
      are not limited to, QTBIPOC (Queer, Trans*, Black, Indigenous, and People of Colour),
      single parents, sex workers, those living in precarious housing situations, those living
      with underlying medical conditions, those with disabilities, newly-arrived immigrants,
      and the elderly.
    </p>
    <p>
      In response to the pandemic, The People's Pantry is a grassroots initiative providing
      home-cooked meals and grocery bundles to individuals and families across the GTA who
      have been disproportionately affected by the COVID-19 crisis.
      We serve those who are struggling financially or are otherwise unable to provide
      sufficient food for themselves and their family. Meals and groceries will be delivered
      right to their door, 100% free of charge.
    </p>
    <p>
      Please fill out this form to the best of your abilities and our team will be in touch.
      If you have any additional questions, please feel free to contact us at
      <a href="mailto:thepeoplespantrytoronto@gmail.com">thepeoplespantrytoronto@gmail.com</a>.
      You can also join our Facebook group:
      <a href="https://www.facebook.com/groups/675649626532144/" target="_blank" rel="noopener">https://www.facebook.com/groups/675649626532144/</a>
    </p>
    <p>
      With care,<br />
      The People's Pantry
    </p>
    {% endblock introduction %}

    <form method="post" class="form">
      {% csrf_token %}

      {% block recipient_section %}
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">Recipient details</h5>
          <div class="row">
            <div class="col-sm">{% bootstrap_field form.name %}</div>
            <div class="col-sm">{% bootstrap_field form.email %}</div>
          </div>
          {% bootstrap_field form.phone_number %}
          {% bootstrap_field form.can_receive_texts %}
        </div>
      </div>
      {% endblock recipient_section %}

      {% block on_behalf_of_section %}
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">Requesting for someone else?</h5>
          <p class="card-text text-muted">
            If you're filling this request out on someone else's behalf, please complete this section.
          </p>
          {% bootstrap_field form.on_behalf_of %}
          {% bootstrap_field form.recipient_notified %}
          <div class="row">
            <div class="col-sm">{% bootstrap_field form.requester_name %}</div>
            <div class="col-sm">{% bootstrap_field form.requester_email %}</div>
          </div>
          {% bootstrap_field form.requester_phone_number %}
        </div>
      </div>
      {% endblock on_behalf_of_section %}

      {% block delivery_section %}
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">Delivery details</h5>
          <div class="row">
            <div class="col-sm-8">{% bootstrap_field form.address_1 %}</div>
            <div class="col-sm-4">{% bootstrap_field form.address_2 %}</div>
          </div>
          <div class="row">
            <div class="col-sm-8">{% bootstrap_field form.city %}</div>
            <div class="col-sm-4">{% bootstrap_field form.postal_code %}</div>
          </div>
          <div class="text-secondary mb-3">
            <small>
              <strong>Don't see your city listed?</strong><br />
              If you are located in in Burlington, Guelph, Halton, Hamilton, Kitchener, Milton, or Oakville our sister initiative may be able to help you
              by filling out <a target="_blank" rel="noopener" href="https://docs.google.com/forms/d/e/1FAIpQLSfO8Z0fHQCH5stBMfw-ONbSh8mbBL124jiC6I8NUSpN0VrUrQ/viewform">this request form</a>.
            </small>
          </div>
          {% bootstrap_field form.can_meet_for_delivery %}
          {% bootstrap_field form.delivery_details %}
          {% bootstrap_field form.availability %}
        </div>
      </div>
      {% endblock delivery_section %}

      {% block details_section %}
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">
            {# Use details_title to define the card title for this section #}
            {% block details_section_title %}{% endblock details_section_title %}
          </h5>

          {% comment %}
          The next few fields are common to both meal and grocery requests
          Then there are a series of fields that are specific to the request type
          We include these first few fields in the base template
          And then allow the section to be extended using blocks
          {% endcomment %}
          <div class="row">
            <div class="col-sm">{% bootstrap_field form.num_adults %}</div>
            <div class="col-sm">{% bootstrap_field form.num_children %}</div>
          </div>
          {% bootstrap_field form.children_ages %}
          {% bootstrap_field form.food_allergies %}

          {# Use details_section_extras to define model-specific fields#}
          {% block details_section_extras %}
          {% endblock details_section_extras %}
        </div>
      </div>
      {% endblock details_section %}

      {% block community_section %}
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">Community (optional)</h5>
          <p class="card-text text-muted">
            Do you or the person you are requesting support for belong to any of the follow communities? Check ALL that apply.
          </p>
          {% bootstrap_field form.bipoc %}
          {% bootstrap_field form.lgbtq %}
          {% bootstrap_field form.has_disability %}
          {% bootstrap_field form.immigrant_or_refugee %}
          {% bootstrap_field form.housing_issues %}
          {% bootstrap_field form.sex_worker %}
          {% bootstrap_field form.single_parent %}
        </div>
      </div>
      {% endblock community_section %}

      {% block notes_section %}
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">Additional information</h5>
          {% bootstrap_field form.notes %}
        </div>
      </div>
      {% endblock notes_section %}

      {% block terms_of_service_section %}
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">Terms of service</h5>
          <textarea class="form-control mb-3" readonly rows="10">{{ form.terms_of_service_text }}</textarea>
          {% bootstrap_field form.accept_terms %}
        </div>
      </div>
      {% endblock terms_of_service_section %}

      <div class="d-flex flex-row-reverse">
        <input type="submit" class="btn btn-primary btn-lg text-right" />
      </div>
    </form>
  </div>
</div>
{% endblock content %}
