{% extends 'base.html' %}
{% load bootstrap4 %}

{% block content %}
<h1 class="mb-3">My cooking tasks</h1>

<div class="row w-75">
  <div class="col">
    <p>Here are all the upcoming meal requests that you've signed up to cook. If you need to make a change to any of these deliveries, please send us an email using the 'Request a change' button and tell us what you need to modify.</p>

    {% for delivery in deliveries %}
      <div class="card mb-4">
        <div class="card-header font-weight-bold">
          Request #{{ delivery.request.id }}: Meal for {{ delivery.request.num_adults }} adult{{ delivery.request.num_adults | pluralize }}
                and {{ delivery.request.num_children }} kid{{ delivery.request.num_children | pluralize }}
                {% if delivery.request.children_ages %}
                  (aged {{ delivery.request.children_ages }})
                {% endif %}
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col">
              <h6>Food preferences</h6>
              <p>{{ delivery.request.food_preferences }}</p>

              <h6>Food allergies</h6>
              <p>{{ delivery.request.food_allergies }}</p>
            </div>
            <div class="col">
              {% if delivery.request.vegan or delivery.request.vegetarian or delivery.request.dairy_free or delivery.request.gluten_free or delivery.request.halal or delivery.request.low_carb %}
                <h6>Other dietary information</h6>
                <ul>
                  {% if delivery.request.vegan %} <li>Vegan</li> {% endif %}
                  {% if delivery.request.vegetarian %} <li>Vegetarian</li> {% endif %}
                  {% if delivery.request.dairy_free %} <li>Dairy Free</li> {% endif %}
                  {% if delivery.request.gluten_free %} <li>Gluten Freen</li> {% endif %}
                  {% if delivery.request.halal %} <li>Halal</li> {% endif %}
                  {% if delivery.request.low_carb %} <li>Low-carb</li> {% endif %}
                </ul>
              {% endif %}
            </div>
          </div>
          <div class="row">
            <div class="col">
              <p class="font-weight-strong">This meal will be picked up on {{ delivery.date }} beetween {{ delivery.pickup_start }} to {{ delivery.pickup_end }} {% if delivery.deliverer %} by {{ delivery.deliverer.volunteer.name }} (contact them at {{ delivery.deliverer.volunteer.phone_number }}) {% else %} (no delivery person has been assigned yet) {% endif %}</p>
            </div>
          </div>
          <a href="mailto:{{settings.REQUEST_COORDINATORS_EMAIL}},{{settings.DELIVERY_COORDINATORS_EMAIL}}?subject=Chef Change Request for Delivery ID {{ delivery.request.id }}" class="btn btn-primary">Request a change</a>
        </div>
      </div>

    {% empty %}
      <div class="alert alert-info">You haven't signed up to cook any meals! <a href={% url 'volunteers:chef_signup' %}>Click here</a> to see the list of meal requests that current need a cook.</div>
    {% endfor %}
  </div>
</div>


{% endblock %}
